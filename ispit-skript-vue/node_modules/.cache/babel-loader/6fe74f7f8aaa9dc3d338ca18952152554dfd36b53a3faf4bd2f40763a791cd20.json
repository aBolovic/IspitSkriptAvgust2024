{"ast":null,"code":"import Vue from 'vue';\nimport Vuex from 'vuex';\nimport axios from 'axios';\nVue.use(Vuex);\nexport default new Vuex.Store({\n  state: {\n    authToken: localStorage.getItem('authToken') || null,\n    isLoggedIn: !!localStorage.getItem('authToken'),\n    bookIds: [],\n    books: []\n  },\n  mutations: {\n    setAuthToken(state, token) {\n      state.authToken = token;\n      state.isLoggedIn = true;\n      localStorage.setItem('authToken', token);\n    },\n    logout(state) {\n      state.authToken = null;\n      state.isLoggedIn = false;\n      localStorage.removeItem('authToken');\n    },\n    setBookIds(state, bookIds) {\n      state.bookIds = bookIds;\n    },\n    setBooks(state, books) {\n      state.books = books;\n    },\n    deleteBook(state, id) {\n      state.books = state.books.filter(book => book.id !== id);\n      state.bookIds = state.bookIds.filter(bookId => bookId !== id);\n    }\n  },\n  actions: {\n    login({\n      commit\n    }, token) {\n      commit('setAuthToken', token);\n    },\n    logout({\n      commit\n    }) {\n      commit('logout');\n    },\n    async fetchBookIds({\n      commit\n    }) {\n      try {\n        const response = await axios.get('http://localhost:8110/admin/book');\n        const bookIds = response.data.map(book => book.id);\n        commit('setBookIds', bookIds);\n      } catch (error) {\n        console.error('Failed to fetch books:', error);\n      }\n    },\n    async fetchBooks({\n      commit\n    }) {\n      try {\n        const response = await axios.get('http://localhost:8110/admin/book');\n        commit('setBooks', response.data);\n      } catch (error) {\n        console.error('Failed to fetch books:', error);\n      }\n    },\n    async deleteBook({\n      commit,\n      state\n    }, id) {\n      try {\n        await axios.delete(`http://localhost:8110/admin/book/${id}`, {\n          headers: {\n            Authorization: `Bearer ${state.authToken}`\n          }\n        });\n        commit('deleteBook', id);\n      } catch (error) {\n        console.error('Failed to delete book:', error);\n      }\n    }\n  },\n  getters: {\n    isAuthenticated: state => !!state.authToken,\n    bookIds: state => state.bookIds,\n    books: state => state.books\n  }\n});","map":{"version":3,"names":["Vue","Vuex","axios","use","Store","state","authToken","localStorage","getItem","isLoggedIn","bookIds","books","mutations","setAuthToken","token","setItem","logout","removeItem","setBookIds","setBooks","deleteBook","id","filter","book","bookId","actions","login","commit","fetchBookIds","response","get","data","map","error","console","fetchBooks","delete","headers","Authorization","getters","isAuthenticated"],"sources":["/Users/aleksabolovic/Desktop/Skript2024/ispit-skript-vue/src/store/index.js"],"sourcesContent":["import Vue from 'vue';\nimport Vuex from 'vuex';\nimport axios from 'axios';\n\nVue.use(Vuex);\n\nexport default new Vuex.Store({\n  state: {\n    authToken: localStorage.getItem('authToken') || null,\n    isLoggedIn: !!localStorage.getItem('authToken'),\n    bookIds: [],\n    books: []\n  },\n  mutations: {\n    setAuthToken(state, token) {\n      state.authToken = token;\n      state.isLoggedIn = true;\n      localStorage.setItem('authToken', token); \n    },\n    logout(state) {\n        state.authToken = null;\n        state.isLoggedIn = false;\n        localStorage.removeItem('authToken');\n\n    },\n    setBookIds(state, bookIds) {\n        state.bookIds = bookIds;\n    },\n    setBooks(state, books) {\n      state.books = books;\n    },\n    deleteBook(state, id) {\n      state.books = state.books.filter(book => book.id !== id);\n      state.bookIds = state.bookIds.filter(bookId => bookId !== id);\n    }\n  },\n  actions: {\n    login({ commit }, token) {\n      commit('setAuthToken', token);\n    },\n    logout({ commit }) {\n      commit('logout');\n    },\n    async fetchBookIds({ commit }) {\n        try {\n            const response = await axios.get('http://localhost:8110/admin/book');\n            const bookIds = response.data.map(book => book.id);\n            commit('setBookIds', bookIds);\n        } catch (error) {\n            console.error('Failed to fetch books:', error);\n        }\n    },\n    async fetchBooks({ commit }) {\n      try {\n        const response = await axios.get('http://localhost:8110/admin/book');\n        commit('setBooks', response.data);\n      } catch (error) {\n        console.error('Failed to fetch books:', error);\n      }\n    },\n    async deleteBook({ commit, state }, id) {\n      try {\n        await axios.delete(`http://localhost:8110/admin/book/${id}`, {\n          headers: { Authorization: `Bearer ${state.authToken}` }\n        });\n        commit('deleteBook', id);\n      } catch (error) {\n        console.error('Failed to delete book:', error);\n      }\n    },\n  },\n  getters: {\n    isAuthenticated: state => !!state.authToken,\n    bookIds: state => state.bookIds,\n    books: state => state.books\n  }\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}